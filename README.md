## Amazon Connect
- 옴니채널 클라우드 콜센터
  - 옴니채널 : 음성 및 채팅과 같은 여러 통신 채널에서 통합된 고객 환경 제공
<br/></br>

## 기본 시나리오
- 고객 : 통화 시작 --> 전화번호 확인 --> 등록된 번호라면 CRM 확인 --> 고객 환경 텍스트를 이용해 읽어줌 --> 고객 : 발화 시작 --> 예약 시작
<br/></br>

## 장점
- 다양한 AWS 서비스와 연동 가능
- 모든 데이터를 무제한으로 S3에 저장 가능
- 고객 응대 흐름에서 원하는 데이터 가져오고 보낼 수 있음
<br/></br>

## 플로우 블록
- 상호 작용
  - 고객 입력 가져오기 : 고객 의도를 기반으로 분기
    - 고객으로부터 응답을 얻기 위해 프롬프트 재생
    - 고객이 DTMF(Dual Tone Multi Frequency) 입력
    - ※ Amazon Lex를 사용하는 경우에만 채팅 사용 가능
  - 고객 입력 저장 : 연락처 속성에 숫자 입력 저장
  - 재생 프롬프트 : 오디오/채팅 메시지 전송
  - 지속적인 연락처 연결 생성 : 속성 지정 --> 지속적인 연락처 연결 생성
  - 태스크 생성 : 할당된 흐름을 실행할 때 새 태스크 생성
- 설정
  - 고객 대기열 흐름 설정 : 고객이 대기열로 전송될 때 실행할 흐름 지정
  - 고객/에이전트 대기 : 고객/에이전트를 대기/대기 취소
  - 고객 응대 재개 : 일시정지된 고객 응대 재개
  - 귓속말 흐름 설정 : 연락처에 대한 고객/에이전트에 재생되는 귓속말 지정
  - 대기 흐름 설정 : 전화 통화 중 고객/에이전트가 대기 중일 때 호출할 흐름 지정
  - 대기열 설정 : 연락처가 전송될 대기열 지정
  - 라우팅 기준 설정 : 대기열 내 연락처를 특정 위치, 전문 지식, 기타 요구사항과 일치하는 에이전트로 타겟팅
  - 연결 해제 흐름 설정 : 에이전트가 연결 해제&고객 통화 유지할 때 실행할 흐름 지정
  - 연락처 속성 설정 : 키-값 페어를 연락처 속성으로 정의, 저장
  - 음성 설정 : 텍스트 음성 변환 상호작용 중에 고객이 듣는 언어, 음성 지정
  - 음성 ID 설정 : 음성 기반 보안 활성화/비활성화
  - 이벤트 흐름 설정 : 흐름을 연락처 이벤트와 연결하는 이벤트 후크 설정
  - 콜백 번호 설정 : 속성 지정 --> 고객 콜백 번호 설정
  - Amazon Connect Q : Amazon Connect Q를 연락처에 연결 --> 실시간 추천 활성화
  - 라우팅 우선순위/수명 변경 : 대기열에서 연락처의 우선순위/수명 변경
- 확인
  - 대기열 상태 확인
  - 대기열 측정치 가져오기
  - 연락처 속성 확인
  - 음성 ID 확인
  - 인력 확인
  - 작업 시간 확인
- 분석
  - 녹음 및 분석 동작 설정
  - 로깅 동작 설정
  - 미디어 스트리밍 시작
  - 미디어 스트리밍 중지
- 로직
- 통합
- 종료

<br/></br>

## 흐름 생성하기

## 실제 전화번호와 연동하기
- https://[connect주소].my.connect.aws/contact-flows/edit?id=arn:aws:connect:ap-northeast-1:[계정Id]:instance/[InstanceId]/contact-flow/[ContactFlowId]
- [lambda 코드]([https://github.com/chomming/aws-connect/blob/main/index.js](https://github.com/chomming/aws-connect/tree/main)https://github.com/chomming/aws-connect/tree/main)

## lambda 코드 DestinationNotAllowedException 오류
- 원인 : 대상 번호로의 발신 전화 허용되지 않음
